{% extends "base.html" %}
{% block content %}
{% load static %}
{% load compress %}
{% csrf_token %}
<h1>Voting</h1>

{% compress js file vue %}
<script src="{% static 'vendor/vue.global.3.3.9.js' %}"></script>
{% endcompress %}

<script>
  window.rockon_data = {
    bands: {{ bands }},
    tracks: {{ tracks }},
    selectedTrackId: {{ trackid }},
    selectedBand: {{ bandid }},
  }
  window.rockon_api = {
    update_band: "{% url "bands-detail" pk="pk_placeholder" %}"
  }
</script>

{% verbatim %}
<div id="app">
  <track-list :tracks="tracks" @select-track="selectTrack"></track-list>
  <band-list v-if="!selectedBand" :bands="bands" :selected-track="selectedTrack" @select-band="selectBand"></band-list>
  <band-details :selected-band="selectedBand" :tracks="tracks" @update:track="updateTrack"></band-details>
</div>
{% endverbatim %}

{% compress js file voting %}
<script src="{% static 'js/voting.js' %}"></script>
{% endcompress %}

{% endblock content %}
